---
marp: true
backgroundColor: #1d3744;
color: #ffffff;
style: |
  @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');

  section {
    font-family: 'Noto Sans JP', sans-serif;
  }
  h1 {
    text-align: center;
    font-size: 64px;
  }
  blockquote {
    color:#ffffff
  }
  img {
    display: block;
    margin: 0 auto;
    background-color: transparent;
  }
headingDivider: 3
---

# 自己紹介

## Tomoya Eguchi

Freelance Director, Motion Designer, CG Generalist

> 2014 年 映像制作を始める
> 2018 年 株式会社ナナメ 入社
> 2020 年 フリーランス
> 2021 年 合同会社キュムロワークスとして法人化

## 合同会社キュムロワークスについて

> 2021 年 9 月設立
> 広告・エンタメ映像など
> 今年 7 月からは大澤(@shigu)との 2 名体制

![bg right](https://cumulo.works/_next/image?url=%2Fcompany_pic_11.jpg&w=1920&q=75)

## SHOWREEL 2024

# 機材紹介

## メインルーター

> YAMAHA RTX1300

- NTT 光クロス(10Gbps)を引き込んでおり、スイッチを介して分配される。
- 高スループットの回線を契約することにより、データのやり取りでストレスが減った。

## メインスイッチ

> XS508M

- 8 ポートのシンプルな 10GbE スイッチ。
- 排熱も良好で、本格的に 10GbE 環境を構築したい方にはおすすめ
- ここから各作業用マシン・サーバーなどへネットワークが分配される。

## メインサーバー

> Synology RS3621xs+

- すべての作業用ファイル・アセットなどを集約している。
- 社内ツールの Web サーバーとしての利用
- Docker コンテナを走らせたり

## オフサイトバックアップサーバー

- メインサーバー導入前に使用していた 6 ベイ NAS を流用。
- アクティブなプロジェクトやその他クリティカルなアセットをメインサーバーとリアルタイム同期
- メインサーバーが使えない状況でも最低限のデータにアクセスできるようにしている

## Mac Mini サーバー

10GbE オプションの M2 Mac Mini を 2 台ラックマウントで導入している。

### 1 台目

安定動作が期待されるサーバー機能を集約

- オンプレミス動画レビューサービスのサーバー
- VPN サーバー（運用休止中）
- DaVinci Resolve のデータベースサーバー

### 2 台目

Mac 環境必須のアプリケーションなどを実行

- Mac 環境でのツールなどの検証
- Thunderbolt 接続された LTO ドライブへのアクセス
- DaVinci Resolve でのリモートレンダリング

## UPS

- ラック全体の電源をバックアップする UPS。
- 高負荷時で、15 分程度。
- NAS と連携しており、自動でシャットダウンされる。

## メインマシン

- 2024 年始めに導入したメインマシン。After Effects や DaVinci Resolve での作業がストレスなく行えるように、メモリを 384GB に。
- Cinema 4D などでのシミュレーション作業も高速で行えるように Threadripper にした。現状 VRAM が 24GB で足りないので、将来的に換装予定。

スペック表

## レンダリングマシン

- 2024 年まで使っていた水冷マシンを小型化したもの。
- 電力的なコストパフォーマンスは悪いが、まだまだ現役。

スペック表

## リモートデスクトップ環境

- Parsec を使ったリモートデスクトップで、運用しているマシンにアクセス可能。
- 遅延が少なく、リモートデスクトップアプリケーションの中では一番良い。
- 広色域・固定フレームレートにも対応していて、映像作業にも使える。
- Chrome Remote Desktop も併用して二重化している。

# ワークフロー紹介

## 進行管理・コミュニケーション

- 社内では基本的に Notion, Discord に集約。
- プロジェクトに合わせて柔軟に対応

## ファイルの命名規則・整理のルールなど

- GitHub で、社内での命名規則のルールを明確化
- 公開中なので、参考にしてほしい

## After Effects でタイムコードのオーバーレイの作成

- プレビズやオフラインデータを起点として制作する場合、各ショット・フレームを正確に把握するために独自のオーバーレイを導入
- 日時・マシン名・タイムコードなどがすぐ把握でき、CG ソフトとのやり取りや、エラーフレームの除去などで活用

## スプレッドシートでカットの情報を一元管理する

- オーバーレイと同時に、スプレッドシートで各ショットの進捗状況を把握
- 複数人で作業する際に効果を発揮（レンダリング作業の分担など）

## GPU レンダリング

- 殆ど全てのプロジェクトで Octane Renderer を使用。
- 基本的には RNDR ネットワークを使用したクラウドレンダリング
- プレビューや、短時間のレンダリングは、ローカルのネットワークレンダリングで行う
- Octane Render の Render Node をつなげることで、それぞれのマシンの GPU を利用可能。簡単にスケールできる

## CPU レンダリング

- Octane Render 以外でのレンダリングは、Cinema 4D の Team Render を使用

## 編集・納品

- 編集は主に DaVinci Resolve を使用。
- Mac Mini サーバーで運用中のデータベースサーバーを使って、複数人でタイムラインを共有できる。
- Mac でリモートレンダリングを設定することで、Windows マシンから ProRes でレンダリングできる。

# プロジェクトのアーカイブ

## ホットアーカイブ

- 直近のプロジェクトは容量が許す限りメインサーバーで保存。
- 完パケの動画ファイルのみ Kampakes フォルダに保存し、後述の LTO からリトリーブする必要が無いようにしている。

## コールドアーカイブ

- 2024 年始め、LTO-8 ドライブを導入。Thunderbolt 接続で、Mac Mini サーバーで運用している。
- YoYotta を使用してアーカイブ・リトリーブ操作を行い、出力された CSV データを SQL データベースに登録、Web サイトからユーザーごとに参照できるようにしている。

## LTO について

### LTO とは。LTO と HDD の違い。

- LTO はテープ型のデータストレージで、HDD と比べて耐久性が高く、データの保存期間も長い。
- 頻繁なアクセスが必要なデータには向かないが、アーカイブ用途には適している。
- 完全にオフラインで保存することができるため、ランサムウェアの対策としても有効と思われる

### LTO のコストパフォーマンスについて

- LTO は、ドライブが非常に高価だが、テープは安価。
- 一度導入してしまえば、以降テープの購入費用だけで済み、長期的に高いコストパフォーマンス。
- Amazon の Glacier などのクラウドストレージでは、保存しているデータ量のみならず、データのアップロード・ダウンロードにコストがかかる。

### 使用方法・メンテナンスなど

- LTO の保存条件は、温度・湿度・磁気の影響を受けやすいため、適切な環境で保管する必要がある。
- 温度は、基本的な日本の屋内であれば問題ないが、湿度が高い部屋の場合はドライボックスなどを使用するのが良さそう。
- データが消える程の磁気の影響は、普段の生活では問題ないと思われる。
- クリーニングカートリッジというのがあり、ドライブでクリーニングのサインが点灯した段階で使用する。
- 災害などへの対策として、同一のコピーを 2 つ作成、別々の場所で保管する。

# まとめ

## なぜオンプレミス化を進めるのか？

- ハードウェアをいじるのが面白いから
- ラックマウントがかっこいいから
- 第三者サービスへの依存を軽減するため...突然のサービス中止、内容変更など

## 機材の選定はどうやって行う？

- コストパフォーマンスを、どのように比較するか
- データ損失などへのリスクをどう評価するか

# 今後の展望 (最近興味があること)

## アプリケーション開発 (Python, Node.js)

- 開発中のアプリケーション（Seequer）のデモ

## カットごとにリアルタイムで進捗状況をトラッキングすること

カットリストの作成
フライトストリップでの管理など

## git でのバージョン管理

複数人で作業するとき、データをバージョン管理できないか（特に AEP など）
